<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="../resources/jquery.mobile-1.4.5.min.css">
  <link rel="stylesheet" type="text/css" href="../resources/style.css">
  <script src="../resources/jquery-2.2.1.js"></script>
    <script src="../resources/jquery.mobile-1.4.5.min.js">  </script>
    <script>
        //to enable recienving json file in app
        /*
        this script is taken from this reference
        http://community.phonegap.com/nitobi/topics/loading_json_with_ajax_working_in_local_browser_but_not_in_phonegap
        */
            $(document).bind("mobileinit", function() {
            $.support.cors = true;
            $.mobile.allowCrossDomainPages = true;
        });
    </script>
</head>
<body>
<div data-role="page" id="pageone">
  <div data-role="header">
    <h1>Buyer's Contact</h1>
    <div data-role="navbar">
      <ul>
        <li><a href="../home.html" class="ui-btn ui-icon-home ui-btn-icon-left">Home</a></li>
      </ul>
    </div>
  </div>

  <div data-role="main" class="ui-content">
    <p></p>
    <ul data-role="listview" id="links"></ul>
      <script>(function($) {
var url = 'http://divakarparashar.hol.es/innovation/mobile/protected/json/vendor-contact.json';

$.ajax({
   type: 'GET',
    url: url,
    async: false,
    jsonpCallback: 'MyJSONPCallback',
    contentType: "application/json",
    dataType: 'jsonp',
	beforeSend:function(){$("#links").html('<p>loading...</a>')},
    success: function(json) {
	   $.each(json,function(i,j){
                 $("#links").append("<li class='ui-btn' style='padding:10px'>"+json.name +":<a href='tel:+"+json.contact+"' data-role='none'>"+json.contact+"</a></li><br/>");
                });
				$("#links p").remove();
    },
    error: function(e) {
       console.log(e.message);
    }
});

})(jQuery);</script>
  </div>

  <div data-role="footer" id="footer">
    <h1 class="ui-title" role="heading" aria-level="1">Farmer's Helpline. Toll free<br>1800 180 1551</h1>
  </div>
</div> 

</body>
</html>
